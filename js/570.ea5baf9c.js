"use strict";(self["webpackChunktest_log_in_user"]=self["webpackChunktest_log_in_user"]||[]).push([[570],{570:function(e,t,s){s.r(t),s.d(t,{default:function(){return E}});var r=s(381),o=s(816),i=s(255),n=s(240),l=s(7),a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-form"},[t(o.Z,{attrs:{width:"500px"}},[t(i.EB,{staticClass:"justify-center"},[t("div",[e._v(" Login ")])]),t(i.ZB,[t(n.Z,{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(l.Z,{attrs:{label:"Username",outlined:"",dense:"",rules:e.usernameRules},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}}),t(l.Z,{attrs:{label:"Phone number",rules:e.phoneNumberRules,outlined:"",dense:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),t("app-alert",{attrs:{hide:3e3,text:e.textAlert},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}}),t(r.Z,{attrs:{loading:e.loading,type:"submit",block:"",color:"success"}},[e._v(" Register ")])],1)],1)],1)],1)},c=[];class h{static async getAllUsers(){try{const e=await fetch("https://jsonplaceholder.typicode.com/users");return e.json()}catch(e){throw new Error(e)}}}var u=s(744),d=r.Z,p=s(524),m=s(552),v=s(66),f=s(144),g=f.ZP.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),b=s(530),_=s(219),y=(0,b.Z)(u.Z,m.Z,g).extend({name:"v-alert",props:{border:{type:String,validator(e){return["top","right","bottom","left"].includes(e)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator(e){return"string"===typeof e||!1===e}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator(e){return["info","error","success","warning"].includes(e)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let e={staticClass:"v-alert__border",class:{[`v-alert__border--${this.border}`]:!0}};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible(){if(!this.dismissible)return null;const e=this.iconColor;return this.$createElement(d,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(p.Z,{props:{color:e}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(p.Z,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const e={...u.Z.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(e[`v-alert--border-${this.border}`]=!0),e},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&`$${this.type}`)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||v.Z.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&(0,_.fK)("outline","outlined",this)},methods:{genWrapper(){const e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],t={staticClass:"v-alert__wrapper"};return this.$createElement("div",t,e)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){const t=this.hasText?this.setTextColor:this.setBackgroundColor;e=t(this.computedColor,e)}return this.$createElement("div",e,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(e){const t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}}),$=function(){var e=this,t=e._self._c;return t(y,{attrs:{transition:"scale-transition",text:"",type:"error"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v(" "+e._s(e.text)+" ")])},x=[],C={name:"AppAlert",props:{hide:{type:Number,default:0},value:{type:Boolean,require:!0},text:{type:String,require:!0}},data(){return{alert:!1}},watch:{value(e){this.alert=e,this.hide&&setTimeout((()=>{this.alert=!1}),this.hide)},alert(e){this.$emit("input",e)}}},B=C,A=s(1),w=(0,A.Z)(B,$,x,!1,null,"4fa353e1",null),Z=w.exports,k={name:"LoginForm",components:{AppAlert:Z},data(){return{showAlert:!1,form:{username:"",phone:""},textAlert:"The user doesn't exist in database",valid:!0,loading:!1}},methods:{validate(){this.$refs.form.validate()},async login(){if(await this.validate(),console.log(this.valid),!this.valid)return!1;this.loading=!0;const e=await h.getAllUsers();this.loginUser(e),this.loading=!1},loginUser(e){const{username:t,phone:s}=this.form,r=e.find((e=>e.username===t&&e.phone===s));if(!r)return this.showAlert=!0,!1;this.$store.commit("setUser",r),localStorage.setItem("user",JSON.stringify(r)),this.$router.push("/")}},computed:{usernameRules(){return[e=>!!e||"Username is required",e=>/^[a-zA-Z]+$/.test(e)||"Username must contain only letters"]},phoneNumberRules(){return[e=>!!e||"Phone number is required",e=>/^[0-9 ()+-]+$/.test(e)||"Phone number must contain only numbers and symbols"]}}},S=k,I=(0,A.Z)(S,a,c,!1,null,"3091819e",null),E=I.exports}}]);
//# sourceMappingURL=570.ea5baf9c.js.map